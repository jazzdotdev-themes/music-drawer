{% if music_box.youtube %}
<script>
  let isPlaying = false;
  let isMuted = false;
  let playCheckbox = document.getElementById('play_button');
  let player = document.getElementById('youtube_video');
  let volumeSld = document.getElementById('volume_slider');



  function callPlayer(frame_id, func, args) {
    if (window.jQuery && frame_id instanceof jQuery) frame_id = frame_id.get(0).id;
    var iframe = document.getElementById(frame_id);
    if (iframe && iframe.tagName.toUpperCase() != 'IFRAME') {
      iframe = iframe.getElementsByTagName('iframe')[0];
    }
    if (iframe) {
      // Frame exists, 
      iframe.contentWindow.postMessage(JSON.stringify({
        "event": "command",
        "func": func,
        "args": args || [],
        "id": frame_id
      }), "*");
    }
  }

  function playPause() {
    if (isPlaying) {
      callPlayer("youtube_video", "pauseVideo");
    } else {
      callPlayer("youtube_video", "playVideo");
    }
    isPlaying = !isPlaying;
  }

  function nextVideo() {
    callPlayer("youtube_video", "nextVideo");
    playCheckbox.checked = true;
    isPlaying = true;
  }

  function previousVideo() {
    callPlayer("youtube_video", "previousVideo");
    playCheckbox.checked = true;
    isPlaying = true;
  }

  volumeSld.oninput = function () {
    callPlayer("youtube_video", "setVolume",[this.value]);
  }

  function muteVideo() {
    if (isMuted) {
      callPlayer("youtube_video", "unMute");      
    }else{
      callPlayer("youtube_video", "mute");
    }
    isMuted = !isMuted;
  }
  


</script>
{% endif %}